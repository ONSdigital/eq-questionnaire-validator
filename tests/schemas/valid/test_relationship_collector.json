{
  "mime_type": "application/json/ons/eq",
  "schema_version": "0.0.1",
  "data_version": "0.0.3",
  "survey_id": "0",
  "title": "Test Relationships",
  "theme": "default",
  "description": "A questionnaire to test capturing of relationships.",
  "messages": {},
  "metadata": [{
      "name": "user_id",
      "type": "string"
    },
    {
      "name": "period_id",
      "type": "string"
    },
    {
      "name": "ru_name",
      "type": "string"
    }
  ],
  "sections": [{
    "id": "section",
    "groups": [{
      "id": "group",
      "title": "Relationships",
      "blocks": [{
          "id": "list-collector",
          "type": "ListCollector",
          "for_list": "people",
          "add_answer": {
            "id": "anyone-else",
            "value": "Yes"
          },
          "remove_answer": {
            "id": "remove-confirmation",
            "value": "Yeah"
          },
          "question": {
            "id": "confirmation-question",
            "type": "General",
            "title": "Does anyone else live here?",
            "answers": [{
              "id": "anyone-else",
              "mandatory": true,
              "type": "Radio",
              "options": [{
                  "label": "Yes",
                  "value": "Yes"
                },
                {
                  "label": "No",
                  "value": "No"
                }
              ]
            }]
          },
          "add_block": {
            "id": "add-person",
            "type": "ListAddQuestion",
            "question": {
              "id": "add-question",
              "type": "General",
              "title": "What is the name of the person?",
              "answers": [{
                  "id": "first-name",
                  "label": "First name",
                  "mandatory": true,
                  "type": "TextField"
                },
                {
                  "id": "last-name",
                  "label": "Last name",
                  "mandatory": true,
                  "type": "TextField"
                }
              ]
            }
          },
          "edit_block": {
            "id": "edit-person",
            "type": "ListEditQuestion",
            "question": {
              "id": "edit-question",
              "type": "General",
              "title": "What is the name of the person?",
              "answers": [{
                  "id": "first-name",
                  "label": "First name",
                  "mandatory": true,
                  "type": "TextField"
                },
                {
                  "id": "last-name",
                  "label": "Last name",
                  "mandatory": true,
                  "type": "TextField"
                }
              ]
            }
          },
          "remove_block": {
            "id": "remove-person",
            "type": "ListRemoveQuestion",
            "question": {
              "id": "remove-question",
              "type": "General",
              "title": "Are you sure you want to remove this person?",
              "answers": [{
                "id": "remove-confirmation",
                "mandatory": true,
                "type": "Radio",
                "options": [{
                    "label": "Yeah",
                    "value": "Yeah"
                  },
                  {
                    "label": "No",
                    "value": "No"
                  }
                ]
              }]
            }
          },
          "summary": {
            "title": "Household members",
            "add_link_text": "Add another person to this household",
            "empty_list_text": "There are no people",
            "item_title": {
              "text": "{person_name}",
              "placeholders": [{
                "placeholder": "person_name",
                "transforms": [{
                  "arguments": {
                    "delimiter": " ",
                    "list_to_concatenate": {
                      "identifier": [
                        "first-name",
                        "last-name"
                      ],
                      "source": "answers"
                    }
                  },
                  "transform": "concatenate_list"
                }]
              }]
            }
          }
        },

        {
          "type": "RelationshipCollector",
          "id": "relationships",
          "title": "This will iterate over the people list, capturing the one way relationships.",
          "for_list": "people",
          "question": {
            "id": "relationship-question",
            "type": "General",
            "title": {
              "text": "Thinking of {first_person_name}, {second_person_name} is their <em>...</em>",
              "placeholders": [{
                  "placeholder": "first_person_name",
                  "transforms": [{
                    "transform": "concatenate_list",
                    "arguments": {
                      "list_to_concatenate": {
                        "source": "answers",
                        "identifier": ["first-name", "last-name"],
                        "list_item_selector": {
                          "source": "location",
                          "id": "list_item_id"
                        }
                      },
                      "delimiter": " "
                    }
                  }]
                },
                {
                  "placeholder": "second_person_name",
                  "transforms": [{
                    "transform": "concatenate_list",
                    "arguments": {
                      "list_to_concatenate": {
                        "source": "answers",
                        "identifier": ["first-name", "last-name"],
                        "list_item_selector": {
                          "source": "location",
                          "id": "to_list_item_id"
                        }
                      },
                      "delimiter": " "
                    }
                  }]
                }
              ]
            },
            "answers": [{
              "id": "relationship-answer",
              "mandatory": true,
              "type": "Relationship",
              "playback": {
                "text": "{second_person_name} is {first_person_name} <em>â€¦</em>",
                "placeholders": [{
                    "placeholder": "second_person_name",
                    "transforms": [{
                      "transform": "concatenate_list",
                      "arguments": {
                        "list_to_concatenate": {
                          "source": "answers",
                          "identifier": ["first-name", "last-name"],
                          "list_item_selector": {
                            "source": "location",
                            "id": "to_list_item_id"
                          }
                        },
                        "delimiter": " "
                      }
                    }]
                  },
                  {
                    "placeholder": "first_person_name",
                    "transforms": [{
                      "transform": "concatenate_list",
                      "arguments": {
                        "list_to_concatenate": {
                          "source": "answers",
                          "identifier": ["first-name", "last-name"],
                          "list_item_selector": {
                            "source": "location",
                            "id": "list_item_id"
                          }
                        },
                        "delimiter": " "
                      }
                    }]
                  }
                ]
              },
              "options": [{
                  "value": "Husband or Wife",
                  "label": "Husband or Wife",
                  "title": {
                    "text": "Thinking of {first_person_name}, {second_person_name} is their <em>husband or wife</em>",
                    "placeholders": [{
                        "placeholder": "second_person_name",
                        "transforms": [{
                          "transform": "concatenate_list",
                          "arguments": {
                            "list_to_concatenate": {
                              "source": "answers",
                              "identifier": ["first-name", "last-name"],
                              "list_item_selector": {
                                "source": "location",
                                "id": "to_list_item_id"
                              }
                            },
                            "delimiter": " "
                          }
                        }]
                      },
                      {
                        "placeholder": "first_person_name",
                        "transforms": [{
                          "transform": "concatenate_list",
                          "arguments": {
                            "list_to_concatenate": {
                              "source": "answers",
                              "identifier": ["first-name", "last-name"],
                              "list_item_selector": {
                                "source": "location",
                                "id": "list_item_id"
                              }
                            },
                            "delimiter": " "
                          }
                        }]
                      }
                    ]
                  },
                  "playback": {
                    "text": "{second_person_name} is {first_person_name} <em>husband or wife</em>",
                    "placeholders": [{
                        "placeholder": "second_person_name",
                        "transforms": [{
                          "transform": "concatenate_list",
                          "arguments": {
                            "list_to_concatenate": {
                              "source": "answers",
                              "identifier": ["first-name", "last-name"],
                              "list_item_selector": {
                                "source": "location",
                                "id": "to_list_item_id"
                              }
                            },
                            "delimiter": " "
                          }
                        }]
                      },
                      {
                        "placeholder": "first_person_name",
                        "transforms": [{
                          "transform": "concatenate_list",
                          "arguments": {
                            "list_to_concatenate": {
                              "source": "answers",
                              "identifier": ["first-name", "last-name"],
                              "list_item_selector": {
                                "source": "location",
                                "id": "list_item_id"
                              }
                            },
                            "delimiter": " "
                          }
                        }]
                      }
                    ]
                  }
                },
                {
                  "value": "Legally Registered Civil Partner",
                  "label": "Legally Registered Civil Partner",
                  "title": {
                    "text": "Thinking of {first_person_name}, {second_person_name} is their <em>legally registered civil partner</em>",
                    "placeholders": [{
                        "placeholder": "second_person_name",
                        "transforms": [{
                          "transform": "concatenate_list",
                          "arguments": {
                            "list_to_concatenate": {
                              "source": "answers",
                              "identifier": ["first-name", "last-name"],
                              "list_item_selector": {
                                "source": "location",
                                "id": "to_list_item_id"
                              }
                            },
                            "delimiter": " "
                          }
                        }]
                      },
                      {
                        "placeholder": "first_person_name",
                        "transforms": [{
                          "transform": "concatenate_list",
                          "arguments": {
                            "list_to_concatenate": {
                              "source": "answers",
                              "identifier": ["first-name", "last-name"],
                              "list_item_selector": {
                                "source": "location",
                                "id": "list_item_id"
                              }
                            },
                            "delimiter": " "
                          }
                        }]
                      }
                    ]
                  },
                  "playback": {
                    "text": "{second_person_name} is {first_person_name} <em>legally registered civil partner</em>",
                    "placeholders": [{
                        "placeholder": "second_person_name",
                        "transforms": [{
                          "transform": "concatenate_list",
                          "arguments": {
                            "list_to_concatenate": {
                              "source": "answers",
                              "identifier": ["first-name", "last-name"],
                              "list_item_selector": {
                                "source": "location",
                                "id": "to_list_item_id"
                              }
                            },
                            "delimiter": " "
                          }
                        }]
                      },
                      {
                        "placeholder": "first_person_name",
                        "transforms": [{
                          "transform": "concatenate_list",
                          "arguments": {
                            "list_to_concatenate": {
                              "source": "answers",
                              "identifier": ["first-name", "last-name"],
                              "list_item_selector": {
                                "source": "location",
                                "id": "list_item_id"
                              }
                            },
                            "delimiter": " "
                          }
                        }]
                      }
                    ]
                  }
                },
                {
                  "label": "Brother or sister",
                  "value": "Brother or sister",
                  "title": {
                    "text": "Thinking of {first_person_name}, {second_person_name} is their <em>brother or sister</em>",
                    "placeholders": [{
                        "placeholder": "second_person_name",
                        "transforms": [{
                          "transform": "concatenate_list",
                          "arguments": {
                            "list_to_concatenate": {
                              "source": "answers",
                              "identifier": ["first-name", "last-name"],
                              "list_item_selector": {
                                "source": "location",
                                "id": "to_list_item_id"
                              }
                            },
                            "delimiter": " "
                          }
                        }]
                      },
                      {
                        "placeholder": "first_person_name",
                        "transforms": [{
                          "transform": "concatenate_list",
                          "arguments": {
                            "list_to_concatenate": {
                              "source": "answers",
                              "identifier": ["first-name", "last-name"],
                              "list_item_selector": {
                                "source": "location",
                                "id": "list_item_id"
                              }
                            },
                            "delimiter": " "
                          }
                        }]
                      }
                    ]
                  },
                  "playback": {
                    "text": "{second_person_name} is {first_person_name} <em>brother or sister</em>",
                    "placeholders": [{
                        "placeholder": "second_person_name",
                        "transforms": [{
                          "transform": "concatenate_list",
                          "arguments": {
                            "list_to_concatenate": {
                              "source": "answers",
                              "identifier": ["first-name", "last-name"],
                              "list_item_selector": {
                                "source": "location",
                                "id": "to_list_item_id"
                              }
                            },
                            "delimiter": " "
                          }
                        }]
                      },
                      {
                        "placeholder": "first_person_name",
                        "transforms": [{
                          "transform": "concatenate_list",
                          "arguments": {
                            "list_to_concatenate": {
                              "source": "answers",
                              "identifier": ["first-name", "last-name"],
                              "list_item_selector": {
                                "source": "location",
                                "id": "list_item_id"
                              }
                            },
                            "delimiter": " "
                          }
                        }]
                      }
                    ]
                  },
                  "description": "Including half brother or half sister"
                }
              ]
            }]
          }
        },
        {
          "type": "Confirmation",
          "id": "confirmation",
          "content": {
            "title": "Thank you for your answers, do you wish to submit"
          }
        }
      ]
    }]
  }]
}
