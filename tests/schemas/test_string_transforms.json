{
    "eq_id": "3",
    "form_type": "3",
    "mime_type": "application/json/ons/eq",
    "schema_version": "0.0.1",
    "data_version": "0.0.2",
    "survey_id": "3",
    "title": "String Transforms",
    "sections": [{
      "id": "section1",
      "groups": [{
          "id": "group1",
          "title": "",
          "blocks": [{
            "id": "block1",
            "title": "",
            "type": "Question",
            "questions": [{
              "id": "question1",
              "title": "",
              "description": "",
              "type": "General",
              "answers": [
                  {
                    "id": "answer0",
                    "mandatory": false,
                    "type": "TextField",
                    "label": "Simple value from answer store",
                    "description": "description with no placeholders"
                  },
                  {
                    "id": "answer1",
                    "mandatory": false,
                    "type": "TextField",
                    "label": "Simple value from answer store",
                    "description": {
                        "text": "test {simple_answer}",
                        "placeholders": [{
                            "placeholder": "simple_answer",
                            "value": {
                                "source": "answers",
                                "identifier": "answer1"
                            }
                        }]
                    }
                  },
                  {
                    "id": "answer2",
                    "mandatory": false,
                    "type": "TextField",
                    "label": "Simple value from answer store via transform",
                    "description": {
                        "text": "test {simple_answer_with_transform}",
                        "placeholders": [{
                            "placeholder": "simple_answer_with_transform",
                            "transforms": [{
                                "transform": "format_number",
                                "arguments": {
                                    "number": {
                                        "source": "answers",
                                        "identifier": "answer2"
                                    }
                                }
                            }]
                        }]
                    }
                  },
                  {
                    "id": "answer3",
                    "mandatory": false,
                    "type": "TextField",
                    "label": "Two values from answer store via transform",
                    "description": {
                        "text": "test {date_range}",
                        "placeholders": [{
                            "placeholder": "date_range",
                            "transforms": [{
                                "transform": "format_date_range",
                                "arguments": {
                                    "start_date": {
                                        "source": "answers",
                                        "identifier": "answer3"
                                    },
                                    "end_date": {
                                        "source": "answers",
                                        "identifier": "answer3"
                                    }
                                }
                            }]
                        }]
                    }
                  },
                  {
                    "id": "answer4",
                    "mandatory": false,
                    "type": "TextField",
                    "label": "Two tranforms chained together",
                    "description": {
                        "text": "test {multiple_transforms}",
                        "placeholders": [{
                            "placeholder": "multiple_transforms",
                            "transforms": [
                                {
                                    "transform": "format_number",
                                    "arguments": {
                                        "number": {
                                            "source": "answers",
                                            "identifier": "answer4"
                                        }
                                    }
                                },
                                {
                                    "transform": "format_number",
                                    "arguments": {
                                        "number": {
                                            "source": "previous_transform"
                                        }
                                    }
                                }
                            ]
                        }]
                    }
                  },
                  {
                    "id": "answer5",
                    "mandatory": false,
                    "type": "TextField",
                    "label": "String value passed to transform",
                    "description": {
                        "text": "test {value}",
                        "placeholders": [{
                            "placeholder": "value",
                            "transforms": [
                                {
                                    "transform": "format_date",
                                    "arguments": {
                                        "date_to_format": {
                                            "source": "answers",
                                            "identifier": "answer5"
                                        },
                                        "date_format": "EEEE d MMMM"
                                    }
                                }
                            ]
                        }]
                    }
                  }
                ]
            },
            {
                "id": "question2",
                "title": "",
                "description": "Calculate years difference tests",
                "type": "General",
                "answers": [
                    {
                        "id": "q2-answer-1",
                        "mandatory": false,
                        "type": "TextField",
                        "label": "Simple calculate years difference",
                        "description": {
                            "text": "test {simple_difference}",
                            "placeholders": [{
                                "placeholder": "simple_difference",
                                "transforms": [
                                    {
                                        "transform": "calculate_years_difference",
                                        "arguments": {
                                            "first_date": {
                                                "value": "2018-01-01"
                                            },
                                            "second_date": {
                                                "value": "2019-01-20"
                                            }
                                        }
                                    }
                                ]
                            }]
                        }
                    },
                    {
                        "id": "q2-answer-2",
                        "mandatory": false,
                        "type": "TextField",
                        "label": "Calculate years difference with one lookup",
                        "description": {
                            "text": "test {one_lookup}",
                            "placeholders": [{
                                "placeholder": "one_lookup",
                                "transforms": [
                                    {
                                        "transform": "calculate_years_difference",
                                        "arguments": {
                                            "first_date": {
                                                "source": "answers",
                                                "identifier": "q2-answer-1"
                                            },
                                            "second_date": {
                                                "value": "2019-01-20"
                                            }
                                        }
                                    }
                                ]
                            }]
                        }
                    },
                    {
                        "id": "q2-answer-3",
                        "mandatory": false,
                        "type": "TextField",
                        "label": "Calculate years difference with two lookups",
                        "description": {
                            "text": "test {two_lookups}",
                            "placeholders": [{
                                "placeholder": "two_lookups",
                                "transforms": [
                                    {
                                        "transform": "calculate_years_difference",
                                        "arguments": {
                                            "first_date": {
                                                "source": "answers",
                                                "identifier": "q2-answer-1"
                                            },
                                            "second_date": {
                                                "source": "answers",
                                                "identifier": "q2-answer-2"
                                            }
                                        }
                                    }
                                ]
                            }]
                        }
                    },
                    {
                        "id": "q2-answer-4",
                        "mandatory": false,
                        "type": "TextField",
                        "label": "Calculate years difference to current date",
                        "description": {
                            "text": "test {difference_to_current_date}",
                            "placeholders": [{
                                "placeholder": "difference_to_current_date",
                                "transforms": [
                                    {
                                        "transform": "calculate_years_difference",
                                        "arguments": {
                                            "first_date": {
                                                "source": "answers",
                                                "identifier": "q2-answer-1"
                                            },
                                            "second_date": {
                                                "value": "now"
                                            }
                                        }
                                    }
                                ]
                            }]
                        }
                    }
                ]
            },
            {
                "id": "question3",
                "title": "",
                "description": "Concatenate list tests",
                "type": "General",
                "answers": [
                    {
                        "id": "q3-answer-1",
                        "mandatory": false,
                        "type": "TextField",
                        "label": "Concatenate list of answer that is a list",
                        "description": {
                            "text": "test {concatenated_list}",
                            "placeholders": [{
                                "placeholder": "concatenated_list",
                                "transforms": [
                                    {
                                        "transform": "concatenate_list",
                                        "arguments": {
                                            "list_to_concatenate": {
                                                "source": "answers",
                                                "identifier": "q2-answer-1"
                                            },
                                            "delimiter": " "
                                        }
                                    }
                                ]
                            }]
                        }
                    },
                    {
                        "id": "q3-answer-2",
                        "mandatory": false,
                        "type": "TextField",
                        "label": "Concatenate list of multiple answers",
                        "description": {
                            "text": "test {concatenated_list}",
                            "placeholders": [{
                                "placeholder": "concatenated_list",
                                "transforms": [
                                    {
                                        "transform": "concatenate_list",
                                        "arguments": {
                                            "list_to_concatenate": {
                                                "source": "answers",
                                                "identifier": ["q2-answer-1","q2-answer-2"]
                                            },
                                            "delimiter": ", "
                                        }
                                    }
                                ]
                            }]
                        }
                    }
                ]
            },
            {
                "id": "question4",
                "title": "",
                "description": "Format possessive tests",
                "type": "General",
                "answers": [
                    {
                        "id": "q4-answer-1",
                        "mandatory": false,
                        "type": "TextField",
                        "label": "Simple format possessive of answer",
                        "description": {
                            "text": "test {possessive_string}",
                            "placeholders": [{
                                "placeholder": "possessive_string",
                                "transforms": [
                                    {
                                        "transform": "format_possessive",
                                        "arguments": {
                                            "string_to_format": {
                                                "source": "answers",
                                                "identifier": "q3-answer-1"
                                            }
                                        }
                                    }
                                ]
                            }]
                        }
                    },
                    {
                        "id": "q4-answer-2",
                        "mandatory": false,
                        "type": "TextField",
                        "label": "Format possessive of an answer from another transform",
                        "description": {
                            "text": "test {possessive_string}",
                            "placeholders": [{
                                "placeholder": "possessive_string",
                                "transforms": [
                                    {
                                        "transform": "concatenate_list",
                                        "arguments": {
                                            "list_to_concatenate": {
                                                "source": "answers",
                                                "identifier": ["q2-answer-1","q2-answer-2"]
                                            },
                                            "delimiter": " "
                                        }
                                    },
                                    {
                                        "transform": "format_possessive",
                                        "arguments": {
                                            "string_to_format": {
                                                "source": "previous_transform"
                                            }
                                        }
                                    }
                                ]
                            }]
                        }
                    }
                ]
            },
            {
                "id": "question5",
                "title": "",
                "description": "Format list tests",
                "type": "General",
                "answers": [
                    {
                        "id": "q5-answer-1",
                        "mandatory": false,
                        "type": "TextField",
                        "label": "Simple format list",
                        "description": {
                            "text": "{list}",
                            "placeholders": [{
                                "placeholder": "list",
                                "transforms": [
                                    {
                                        "transform": "format_list",
                                        "arguments": {
                                            "list_to_format": {
                                                "source": "answers",
                                                "identifier": ["q2-answer-1","q2-answer-2"]
                                            }
                                        }
                                    }
                                ]
                            }]
                        }
                    }
                ]
            },
            {
                "id": "question6",
                "title": "",
                "description": "Radio option label tests",
                "type": "General",
                "answers": [
                    {
                        "id": "q6-answer-1",
                        "mandatory": false,
                        "type": "Radio",
                        "label": "Placeholders in radio option label",
                        "description": "",
                        "options": [
                            {
                                "label": {
                                    "text": "test {simple_answer}",
                                    "placeholders": [
                                        {
                                            "placeholder": "simple_answer",
                                            "value": {
                                                "source": "answers",
                                                "identifier": "answer1"
                                            }
                                        }
                                    ]
                                },
                                "value": "value"
                            },
                            {
                                "label": "Another value",
                                "value": "value2"
                            }
                        ]
                    }
                ]
            },
            {
                "id": "question7",
                "title": "",
                "description": "Checkbox option label tests",
                "type": "General",
                "answers": [
                    {
                        "id": "q7-answer-1",
                        "mandatory": false,
                        "type": "Checkbox",
                        "label": "Placeholders in checkbox option label",
                        "description": "",
                        "options": [
                            {
                                "label": {
                                    "text": "test {simple_answer}",
                                    "placeholders": [
                                        {
                                            "placeholder": "simple_answer",
                                            "value": {
                                                "source": "answers",
                                                "identifier": "answer1"
                                            }
                                        }
                                    ]
                                },
                                "value": "value"
                            },
                            {
                                "label": "Another value",
                                "value": "value2"
                            }
                        ]
                    }
                ]
            }]
          },
          {
            "id": "confirmation",
            "type": "Confirmation",
            "description": "",
            "title": ""
          }]
        }
      ]
    }],
    "theme": "default",
    "legal_basis": "StatisticsOfTradeAct",
    "navigation": {
      "visible": false
    },
    "metadata": [{
        "name": "user_id",
        "validator": "string"
      },
      {
        "name": "period_id",
        "validator": "string"
      },
      {
        "name": "ru_name",
        "validator": "string"
      },
      {
        "name": "test_metadata",
        "validator": "string"
      }
    ]
}